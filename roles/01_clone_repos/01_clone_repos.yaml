- name: Download git repo frontend on local
  hosts: localhost
  vars_files:
    - vars.yaml
  vars:
    workdir: "{{ playbook_dir }}/../workdir"
  tasks:
    - name: Make sure working directory exists
      ansible.builtin.file:
        path: "{{ workdir }}"
    - name: Clone the frontend repository
      ansible.builtin.git:
        repo: "{{ frontend_repo }}"
        dest: "{{ workdir }}/frontend"
    - name: Install frontend dependencies
      ansible.builtin.shell:
        cmd: npm install
        chdir: "{{ workdir }}/frontend"
        creates: "{{ workdir }}/frontend/node_modules"
